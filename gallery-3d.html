<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>Yanxu | 幻境国画</title>
    <style>
        /* === 全局变量 === */
        :root {
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.6);
        }

        body { 
            margin: 0; overflow: hidden; 
            background-color: #050505; /* 页面加载底色改为纯黑 */
            font-family: "Songti SC", "Noto Serif SC", serif; 
            color: var(--text-primary);
        }

        /* === 极光背景 (仅UI层) === */
        .aurora-bg {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: -1;
            background: radial-gradient(circle at 50% 50%, #2b1055, #7597de, #000000); /* 改暗一点，不刺眼 */
            background-size: 200% 200%;
            opacity: 0.4; /* 降低透明度，让它不抢眼 */
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #crosshair {
            position: absolute; top: 50%; left: 50%; width: 6px; height: 6px;
            background: rgba(255,255,255,0.9); border-radius: 50%;
            box-shadow: 0 0 8px rgba(255,255,255,0.8);
            transform: translate(-50%, -50%); pointer-events: none; z-index: 10;
            transition: transform 0.2s;
        }
        #crosshair.active { transform: translate(-50%, -50%) scale(2); background: #ff0055; }

        /* === 详情弹窗 === */
        #detail-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); /* 背景更黑，突出画作 */
            backdrop-filter: blur(10px);
            z-index: 2000;
            flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.4s ease;
        }
        #detail-modal.active { opacity: 1; }
        
        #detail-content-box {
            display: flex; flex-direction: column; align-items: center;
            max-width: 90%; max-height: 90vh;
            padding: 30px;
            background: var(--glass-bg);
            box-shadow: var(--glass-shadow);
            border-radius: 24px;
            border: 1px solid var(--glass-border);
            transform: scale(0.95); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #detail-modal.active #detail-content-box { transform: scale(1); }
        
        #detail-img {
            max-height: 55vh; max-width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6); /* 强阴影 */
            border: 4px solid rgba(255,255,255,0.1);
        }
        
        #detail-info {
            width: 100%; margin-top: 25px; 
            display: flex; flex-direction: column; align-items: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        #modal-title { font-size: 36px; margin-bottom: 5px; font-weight: 300; letter-spacing: 6px; color: #fff; }
        #modal-desc { font-size: 14px; color: var(--text-secondary); letter-spacing: 2px; font-family: sans-serif; margin-bottom: 15px; }
        
        /* === 新增：浏览热度标签 === */
        .view-badge {
            display: flex; align-items: center; gap: 6px;
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 16px; border-radius: 20px;
            font-size: 12px; color: #ccc; font-family: sans-serif;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .view-badge svg { fill: #ccc; width: 14px; height: 14px; }

        #close-btn {
            position: absolute; top: -20px; right: -20px; 
            width: 44px; height: 44px; line-height: 44px; text-align: center;
            border-radius: 50%; background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            color: white; font-size: 18px; cursor: pointer;
            transition: all 0.3s;
        }
        #close-btn:hover { background: #ff4757; border-color: #ff4757; transform: rotate(90deg); }

        /* === 封面 === */
        #blocker {
            position: absolute; width: 100%; height: 100%;
            background: rgba(5, 5, 10, 0.6); /* 深色遮罩 */
            backdrop-filter: blur(25px);
            color: white; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 999; cursor: pointer; transition: opacity 0.8s ease;
        }
        
        .cover-box {
            text-align: center; padding: 60px 80px;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 30px 80px rgba(0,0,0,0.5);
        }

        .cover-title { 
            font-size: 72px; margin-bottom: 10px; letter-spacing: 12px; 
            background: linear-gradient(to right, #ffffff, #a18cd1);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .cover-subtitle { 
            font-size: 18px; color: rgba(255,255,255,0.5); letter-spacing: 8px; 
            text-transform: uppercase; margin-bottom: 40px;
            border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 20px; display: inline-block;
        }
        
        .btn { 
            padding: 16px 60px; border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white; font-size: 14px; letter-spacing: 4px;
            cursor: pointer; transition: all 0.4s ease;
        }
        .btn:hover { background: white; color: black; box-shadow: 0 0 30px rgba(255, 255, 255, 0.4); }
    </style>

    <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
</head>
<body>
    <div id="crosshair"></div>
    <div class="aurora-bg"></div>

    <div id="detail-modal">
        <div id="detail-content-box">
            <div id="close-btn">✕</div>
            <img id="detail-img" src="" alt="Art">
            <div id="detail-info">
                <div id="modal-title">标题</div>
                <div id="modal-desc">简介</div>
                
                <div class="view-badge">
                    <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                    <span id="view-count">1,234</span> 人正在观赏
                </div>
            </div>
        </div>
    </div>

    <div id="blocker">
        <div class="cover-box">
            <div class="cover-title">Yanxu</div>
            <div class="cover-subtitle">Infinite Art Gallery</div>
            <div class="btn">ENTER</div>
        </div>
    </div>

    <script type="module" src="assets/js/gallery-3d.js"></script>

    <script>
        const modal = document.getElementById('detail-modal');
        const closeBtn = document.getElementById('close-btn');
        const crosshair = document.getElementById('crosshair');

        function closeModal() {
            modal.classList.remove('active');
            setTimeout(() => { modal.style.display = 'none'; }, 400);
            window.dispatchEvent(new Event('closeModal'));
        }
        closeBtn.onclick = closeModal;
        modal.onclick = (e) => { if(e.target === modal) closeModal(); };

        document.addEventListener('mousedown', () => crosshair.classList.add('active'));
        document.addEventListener('mouseup', () => crosshair.classList.remove('active'));
        document.addEventListener('touchstart', () => crosshair.classList.add('active'));
        document.addEventListener('touchend', () => crosshair.classList.remove('active'));
    </script>
</body>
</html>
